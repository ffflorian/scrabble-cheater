#!/usr/bin/env node

//@ts-check

const { default: ScrabbleCheater } = require('../dist/');
const { description, version } = require('../package.json');
const program = require('commander');

program
  .version(version)
  .description(description)
  .option('-w, --wordlist <path>', 'Specify a wordlist file')
  .option('-m, --maximum <number>', 'Specify a maximum of results')
  .option(
    '-s, --single',
    'Use single word output (copies each word to the clipboard)'
  )
  .parse(process.argv);

if (!program.wordlist) {
  console.error('No wordlist file specified.');
  program.help();
}

new ScrabbleCheater(program.wordlist, program.single)
  .start()
  .then(matches => {
    if (matches.length && !program.single) {
      console.log();
      if (program.maximum) {
        matches = matches.slice(0, program.maximum);
      }
      console.log(matches.join('\n'));
    }
  })
  .catch(err => console.error('Error:', err));

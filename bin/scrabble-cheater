#!/usr/bin/env node

//@ts-check

const { default: ScrabbleCheater } = require('../dist/');
const { description, version } = require('../package.json');
const program = require('commander');

program
  .version(version)
  .description(description)
  .option('-w, --wordlist <file>', 'Specify a wordlist file (mandatory)')
  .option('-m, --maximum <number>', 'Specify a maximum of results')
  .option('-l, --letters <letters>', 'Specify letters')
  .option(
    '-s, --single',
    'Use single word output (copies each word to the clipboard)'
  )
  .parse(process.argv);

if (!program.wordlist) {
  console.error('  Error: no wordlist file specified.');
  program.help();
}

if (program.maximum && !parseInt(program.maximum, 10)) {
  console.error('  Error: invalid maximum number specified.');
  program.help();
}

new ScrabbleCheater(program.wordlist, program.maximum, program.single, program.letters)
  .start()
  .then(matches => {
    if (matches.length && !program.single) {
      console.log();
      console.log(matches.join('\n'));
    }
  })
  .catch(err => console.error('Error:', err));
